(()=>{"use strict";var e={341:()=>{function e(){const e=document.querySelector("header");e?scrollBy(0,-2*parseInt(getComputedStyle(e).height.replace(/px$/,""))):console.error("header was not found.")}new class{constructor(){this.overlay=document.getElementById("overlay"),this.menu=document.getElementById("menu"),this.item_outer=document.getElementById("menu_item_outer"),this.open_button=document.getElementById("menu_open_button"),this.close_button=document.getElementById("menu_close_button"),this.open_attribute="data-open",this.open_button?this.open_button.addEventListener("click",(()=>this.show())):console.error("#menu_open_button was not found."),this.close_button?this.close_button.addEventListener("click",(()=>this.hide())):console.error("#menu_close_button was not found."),this.overlay?this.overlay.addEventListener("click",(()=>this.hide())):console.error("#overlay was not found."),[...document.querySelectorAll("h2")].reverse().forEach((t=>{if("none"!==getComputedStyle(t).display&&t.textContent&&this.item_outer){const n=document.createElement("div");n.className="menu_item",n.textContent=t.textContent,n.addEventListener("click",(()=>{location.hash=t.id,e()})),this.item_outer.insertAdjacentElement("afterbegin",n)}}))}show(){this.menu?(this.menu.setAttribute(this.open_attribute,""),this.overlay&&(this.overlay.style.display="block")):console.error("#menu was not found.")}hide(){this.menu?(this.menu.removeAttribute(this.open_attribute),this.overlay&&(this.overlay.style.display="none")):console.error("#menu was not found.")}},location.hash&&e()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}(()=>{Object.values({image:".css-1dbjc4n.r-1867qdf.r-1phboty.r-rs99b7.r-1s2bzr4.r-1ny4l3l.r-1udh08x.r-o7ynqc.r-6416eg",video:".css-1dbjc4n.r-1867qdf.r-1phboty.r-rs99b7.r-1s2bzr4.r-1ny4l3l.r-1udh08x",summary_card:".css-1dbjc4n.r-1867qdf.r-1phboty.r-rs99b7.r-18u37iz.r-1ny4l3l.r-1udh08x.r-o7ynqc.r-6416eg",summary_with_large_image:".css-1dbjc4n.r-1867qdf.r-1phboty.r-rs99b7.r-1ny4l3l.r-1udh08x.r-o7ynqc.r-6416eg"}).join(",");const e={include_verified_account:!1,include_user_name:!1,show_reason:!0,decompress_on_hover:!1,ng_word:[""],allow_list:[""],exclude_url:["https://twitter.com/home"],advanced_filter:[""],main_color:"rgb(29, 161, 242)",background_color:"rgb(0, 0, 0)",font_color:"rgb(255, 255, 255)"};class t{constructor(){this.setting=e,this.callback=void 0}async load(){const t=await browser.storage.local.get("setting"),n=e;return Object.keys(e).forEach((o=>{n[o]=void 0!==t.setting[o]?t.setting[o]:e[o]})),browser.storage.onChanged.addListener((e=>{this.setting=e.setting.newValue,this.callback&&this.callback()})),new Proxy(n,{get:(e,t)=>this.setting[t],set:(e,t,n)=>(this.setting[t]=n,this.save(),!0)})}save(){browser.storage.local.set({setting:this.setting})}onChange(e){this.callback=e}}function o(e,t){return e.replace(/^rgb\(/,"rgba(").replace(/\)$/,`, ${t})`)}n(341),(new t).load().then((e=>{!async function(){const e=await(new t).load(),n=document.createElement("style");n.textContent=`\n:root {\n    --main_color: ${e.main_color};\n    --background_color: ${e.background_color};\n    --high_emphasize_text_color: ${o(e.font_color,.87)};\n    --medium_emphasize_text_color: ${o(e.font_color,.6)};\n}\n    `,document.body.appendChild(n)}(),async function(e){const t=await fetch("https://cdn.statically.io/gh/Robot-Inventor/stc-filter/main/dist/advanced_filter.json"),n=await t.json(),o=document.getElementById("filter_list_outer");o?Object.keys(n).sort().forEach((t=>{const n=document.createElement("input");n.type="checkbox";const r=t.replace(/[ 　]/g,"_");n.id=r,n.dataset.filterName=t,e.advanced_filter.includes(t)&&(n.checked=!0),n.addEventListener("change",(()=>{const t=o.querySelectorAll("input[type='checkbox']");e.advanced_filter=[...t].filter((e=>e.checked&&void 0!==e.dataset.filterName)).map((e=>e.dataset.filterName||""))}));const s=document.createElement("label");s.textContent=t,s.setAttribute("for",r);const c=document.createElement("div");c.className="filter_list_item",c.appendChild(n),c.appendChild(s),o.appendChild(c)})):console.log("filter_list_outerが見つかりませんでした")}(e),document.querySelectorAll("textarea").forEach((t=>{const n=function(e){const t=e.dataset.settingName;if(t)return t;throw"設定の名称が指定されていないinput要素が見つかりました"}(t);if(Object.keys(e).includes(n)){const o=e[n];t.value=o instanceof Array?o.join("\n"):"",t.addEventListener("change",(()=>e[n]=t.value.split("\n"))),window.addEventListener("beforeunload",(()=>e[n]=t.value.split("\n")))}}));const n=document.getElementById("copy_button");n&&n.addEventListener("click",(()=>{const t=JSON.stringify(e,null,4);navigator.clipboard.writeText(t),n.textContent=browser.i18n.getMessage("advanced_setting_export_copied"),setTimeout((()=>n.textContent=browser.i18n.getMessage("advanced_setting_export_copy")),5e3)}));const r=document.getElementById("save_button");r&&r.addEventListener("click",(()=>{const t=JSON.stringify(e,null,4),n=document.createElement("a");n.href=URL.createObjectURL(new Blob([t],{type:"text/json"})),n.download="stc_setting.json",n.style.display="none",document.body.appendChild(n),n.click(),n.remove(),r.textContent=browser.i18n.getMessage("advanced_setting_export_saved"),setTimeout((()=>r.textContent=browser.i18n.getMessage("advanced_setting_export_save")),5e3)}))})).catch((()=>console.error("設定を読み込めませんでした")))})()})();