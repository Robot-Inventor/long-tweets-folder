(()=>{"use strict";var e={341:()=>{const e=()=>{const e=document.querySelector("header");e?scrollBy(0,-2*parseInt(getComputedStyle(e).height.replace(/px$/u,""))):console.error("header was not found.")};new class{constructor(){this.overlay=document.getElementById("overlay"),this.menu=document.getElementById("menu"),this.item_outer=document.getElementById("menu_item_outer"),this.open_button=document.getElementById("menu_open_button"),this.close_button=document.getElementById("menu_close_button"),this.open_attribute="data-open",this.open_button?this.open_button.addEventListener("click",(()=>this.show())):console.error("#menu_open_button was not found."),this.close_button?this.close_button.addEventListener("click",(()=>this.hide())):console.error("#menu_close_button was not found."),this.overlay?this.overlay.addEventListener("click",(()=>this.hide())):console.error("#overlay was not found."),[...document.querySelectorAll("h2")].reverse().forEach((t=>{if("none"!==getComputedStyle(t).display&&t.textContent&&this.item_outer){const n=document.createElement("div");n.className="menu_item",n.textContent=t.textContent,n.addEventListener("click",(()=>{location.hash=t.id,e()})),this.item_outer.insertAdjacentElement("afterbegin",n)}}))}show(){this.menu?(this.menu.setAttribute(this.open_attribute,""),this.overlay&&(this.overlay.style.display="block")):console.error("#menu was not found.")}hide(){this.menu?(this.menu.removeAttribute(this.open_attribute),this.overlay&&(this.overlay.style.display="none")):console.error("#menu was not found.")}},location.hash&&e()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}(()=>{n(341);const e={advanced_filter:[""],allow_list:[""],background_color:"rgb(0, 0, 0)",decompress_on_hover:!1,exclude_url:["https://twitter.com/home"],font_color:"rgb(255, 255, 255)",hide_completely:!1,include_user_name:!1,include_verified_account:!1,main_color:"rgb(29, 161, 242)",ng_word:[""],show_reason:!0};class t{constructor(){this.setting=e,this.callback=null}async load(){const t=await browser.storage.local.get("setting"),n=e;return t.setting&&Object.keys(t.setting).filter((t=>t in e)).forEach((e=>n[e]=t.setting[e])),browser.storage.onChanged.addListener((e=>{this.setting=e.setting.newValue,this.callback&&this.callback()})),new Proxy(n,{get:(e,t)=>this.setting[t],set:(e,t,n)=>(this.setting[t]=n,this.save(),!0)})}save(){browser.storage.local.set({setting:this.setting})}onChange(e){this.callback=e}}Object.values({image:".css-1dbjc4n.r-1867qdf.r-1phboty.r-rs99b7.r-1s2bzr4.r-1ny4l3l.r-1udh08x.r-o7ynqc.r-6416eg",summary_card:".css-1dbjc4n.r-1867qdf.r-1phboty.r-rs99b7.r-18u37iz.r-1ny4l3l.r-1udh08x.r-o7ynqc.r-6416eg",summary_with_large_image:".css-1dbjc4n.r-1867qdf.r-1phboty.r-rs99b7.r-1ny4l3l.r-1udh08x.r-o7ynqc.r-6416eg",video:".css-1dbjc4n.r-1867qdf.r-1phboty.r-rs99b7.r-1s2bzr4.r-1ny4l3l.r-1udh08x"}).join(",");const o=(e,t)=>e.replace(/^rgb\(/u,"rgba(").replace(/\)$/u,`, ${t})`),r=e=>JSON.stringify(e,null,4),s=(e,t)=>{const n=e.textContent;e.textContent=t,setTimeout((()=>e.textContent=n),5e3)};(new t).load().then((e=>{(async()=>{const e=await(new t).load(),n=document.createElement("style");n.textContent=`\n:root {\n    --main_color: ${e.main_color};\n    --background_color: ${e.background_color};\n    --high_emphasize_text_color: ${o(e.font_color,1)};\n    --medium_emphasize_text_color: ${o(e.font_color,.87)};\n}\n    `,document.body.appendChild(n)})(),(async e=>{const t=document.getElementById("filter_list_outer");if(!t)return void console.error("#filter_list_outer was not found.");const n=await fetch("https://cdn.statically.io/gh/Robot-Inventor/stc-filter/main/dist/advanced_filter.json"),o=await n.json();Object.keys(o).sort().forEach((n=>{const r=document.createElement("input");r.type="checkbox";const s=n.replace(/[ 　]/gu,"_");r.id=s;const c=o[n].id;r.dataset.filterId=c,e.advanced_filter.includes(c)&&(r.checked=!0),r.addEventListener("change",(()=>{const n=t.querySelectorAll("input[type='checkbox']");e.advanced_filter=[...n].filter((e=>e.checked&&void 0!==e.dataset.filterId)).map((e=>e.dataset.filterId||""))}));const i=document.createElement("label");i.textContent=n,i.setAttribute("for",s);const a=document.createElement("div");a.className="filter_list_item",a.appendChild(r),a.appendChild(i),t.appendChild(a)}))})(e),document.querySelectorAll("textarea").forEach((t=>{const n=(e=>{const t=e.dataset.settingName;if(t)return t;throw new Error("設定の名称が指定されていないinput要素が見つかりました")})(t);if(Object.keys(e).includes(n)){const o=e[n];t.value=o instanceof Array?o.join("\n"):"",t.addEventListener("change",(()=>e[n]=t.value.split("\n"))),window.addEventListener("beforeunload",(()=>e[n]=t.value.split("\n")))}}));const n=document.getElementById("copy_button");n&&n.addEventListener("click",(()=>{var t;t=r(e),navigator.clipboard.writeText(t),s(n,browser.i18n.getMessage("advanced_setting_export_copied"))}));const c=document.getElementById("save_button");c&&c.addEventListener("click",(()=>{((e,t)=>{const n=document.createElement("a");n.href=URL.createObjectURL(new Blob([e],{type:"text/json"})),n.download="stc_setting.json",n.style.display="none",document.body.appendChild(n),n.click(),n.remove()})(r(e)),s(c,browser.i18n.getMessage("advanced_setting_export_saved"))}))})).catch((()=>console.error("設定を読み込めませんでした")))})()})();